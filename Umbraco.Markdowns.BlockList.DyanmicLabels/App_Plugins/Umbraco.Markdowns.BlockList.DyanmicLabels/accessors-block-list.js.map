{"version":3,"file":"url-picker-ufm.js","sources":["../../../../../../../url-picker-ufm/src/root/manifest.ts","../../../../../../../url-picker-ufm/src/index.ts","../../../../../../../url-picker-ufm/src/root/ufm.element.ts","../../../../../../../url-picker-ufm/src/root/ufm.component.ts"],"sourcesContent":["\nconst ufmManifest = {\n  type: \"ufmComponent\",\n  alias: \"My.CustomUfmComponent\",\n  name: \"My Custom UFM Component\",\n  api: () => import(\"./ufm.component\"),\n  meta: {\n    marker: \"%\",\n  },\n};\n\nexport const manifests = [ufmManifest];\n","import { UmbEntryPointOnInit } from '@umbraco-cms/backoffice/extension-api';\nimport { manifests } from './root/manifest';\n\n\nexport const onInit: UmbEntryPointOnInit = (_host, extensionRegistry) => {\n    \n    // register them here. \n    extensionRegistry.registerMany([\n        ...manifests\n    ]);\n\n    // _host.consumeContext(UMB_AUTH_CONTEXT, (_auth) => {\n    //     const umbOpenApi = _auth.getOpenApiConfiguration();\n    // });\n\n};\n","import { customElement, property } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UMB_BLOCK_ENTRY_CONTEXT } from \"@umbraco-cms/backoffice/block\";\r\nimport { UmbUfmElementBase } from \"@umbraco-cms/backoffice/ufm\";\r\n\r\nconst elementName = \"ufm-custom-value\";\r\n@customElement(elementName)\r\nexport class CustomUmbUfmLabelValueElement extends UmbUfmElementBase {\r\n  @property()\r\n  alias?: string;\r\n\r\n  getValueFromExpression(dataSource: any, expression: string) {\r\n    const keys = [];\r\n    const regex = /([a-zA-Z_$][\\w$]*)|\\[(\\d+)\\]/g; // Matches keys and array indices\r\n\r\n    let match;\r\n    while ((match = regex.exec(expression)) !== null) {\r\n      if (match[1]) {\r\n        // It's a string key before a dot or standalone\r\n        keys.push(match[1]);\r\n      } else if (match[2]) {\r\n        // It's an index inside square brackets\r\n        keys.push(parseInt(match[2], 10));\r\n      }\r\n    }\r\n    let target = dataSource;\r\n    for (const key of keys) target = target[key];\r\n\r\n    return target;\r\n  }\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_BLOCK_ENTRY_CONTEXT, async (context) => {\r\n\t\t\tconst content = await context.contentValues();\r\n\t\t\tthis.observe(\r\n\t\t\t\tcontent,\r\n\t\t\t\t(value) => {\r\n          if (value === undefined) return;\r\n\t\t\t\t\tconst exprestionValue = this.getValueFromExpression(value, this.alias!);\r\n\t\t\t\t\tif (exprestionValue === undefined) {\r\n\t\t\t\t\t\tthis.observe(context.contentElementTypeName, (value) => {\r\n\t\t\t\t\t\t\tthis.value = this.localize.term(value!);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.value = exprestionValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t'observeValue',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n}\r\nexport { CustomUmbUfmLabelValueElement as element };\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    [elementName]: CustomUmbUfmLabelValueElement;\r\n  }\r\n}\r\n","import {\r\n  UmbUfmComponentBase,\r\n  type UfmToken,\r\n} from \"@umbraco-cms/backoffice/ufm\";\r\n\r\nimport './ufm.element';\r\n\r\nexport class MyCustomUfmComponent extends UmbUfmComponentBase {\r\n  render(token: UfmToken) {\r\n\t\tif (!token.text) return;\r\n\r\n    const attributes = super.getAttributes(token.text);\r\n    return `<ufm-custom-value  ${attributes}></ufm-custom-value>`;\r\n  }\r\n}\r\n\r\nexport { MyCustomUfmComponent as api };\r\n"],"names":["ufmManifest","ufm_component","manifests","onInit","_host","extensionRegistry","elementName","CustomUmbUfmLabelValueElement","UmbUfmElementBase","dataSource","expression","keys","regex","match","target","key","UMB_BLOCK_ENTRY_CONTEXT","context","content","value","exprestionValue","__decorateClass","property","customElement","MyCustomUfmComponent","UmbUfmComponentBase","token"],"mappings":";;;AACA,MAAMA,IAAc;AAAA,EAClB,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM;AAAA,EACN,KAAK,MAAM,QAAwB,QAAA,EAAA,KAAA,MAAAC,CAAA;AAAA,EACnC,MAAM;AAAA,IACJ,QAAQ;AAAA,EACV;AACF,GAEaC,IAAY,CAACF,CAAW,GCPxBG,IAA8B,CAACC,GAAOC,MAAsB;AAGrE,EAAAA,EAAkB,aAAa;AAAA,IAC3B,GAAGH;AAAA,EAAA,CACN;AAML;;;;;;ACXA,MAAMI,IAAc;AAEP,IAAAC,IAAN,cAA4CC,EAAkB;AAAA,EAInE,uBAAuBC,GAAiBC,GAAoB;AAC1D,UAAMC,IAAO,CAAA,GACPC,IAAQ;AAEV,QAAAC;AACJ,YAAQA,IAAQD,EAAM,KAAKF,CAAU,OAAO;AACtC,MAAAG,EAAM,CAAC,IAEJF,EAAA,KAAKE,EAAM,CAAC,CAAC,IACTA,EAAM,CAAC,KAEhBF,EAAK,KAAK,SAASE,EAAM,CAAC,GAAG,EAAE,CAAC;AAGpC,QAAIC,IAASL;AACb,eAAWM,KAAOJ,EAAe,CAAAG,IAAAA,EAAOC,CAAG;AAEpC,WAAAD;AAAA,EACT;AAAA,EAED,cAAc;AACP,aACD,KAAA,eAAeE,GAAyB,OAAOC,MAAY;AACzD,YAAAC,IAAU,MAAMD,EAAQ;AACzB,WAAA;AAAA,QACJC;AAAA,QACA,CAACC,MAAU;AACL,cAAIA,MAAU,OAAW;AAC9B,gBAAMC,IAAkB,KAAK,uBAAuBD,GAAO,KAAK,KAAM;AACtE,UAAIC,MAAoB,SACvB,KAAK,QAAQH,EAAQ,wBAAwB,CAACE,MAAU;AACvD,iBAAK,QAAQ,KAAK,SAAS,KAAKA,CAAM;AAAA,UAAA,CACtC,IAED,KAAK,QAAQC;AAAA,QAEf;AAAA,QACA;AAAA,MAAA;AAAA,IACD,CACA;AAAA,EACF;AACD;AA3CEC,EAAA;AAAA,EADCC,EAAS;AAAA,GADCf,EAEX,WAAA,SAAA,CAAA;AAFWA,IAANc,EAAA;AAAA,EADNE,EAAcjB,CAAW;AAAA,GACbC,CAAA;ACCN,MAAMiB,UAA6BC,EAAoB;AAAA,EAC5D,OAAOC,GAAiB;AACpB,WAACA,EAAM,OAGF,sBADY,MAAM,cAAcA,EAAM,IAAI,CACV,yBAHxB;AAAA,EAIjB;AACF;;;;;;"}